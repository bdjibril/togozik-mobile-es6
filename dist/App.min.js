!function(t,e){if("function"==typeof define&&define.amd)define("App",["tabris"],e);else if("undefined"!=typeof exports)e(require("tabris"));else{var r={exports:{}};e(t.tabris),t.App=r.exports}}(this,function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){return null!=t&&"object"===("undefined"==typeof t?"undefined":M(t))}function i(t){return"function"==typeof t}function a(){try{return X.apply(this,arguments)}catch(t){return U.e=t,U}}function s(t){return X=t,a}function u(t,e,r){if(t){if(t instanceof G)return t;if(t[N])return t[N]()}return t||e||r?new G(t,e,r):new G}function c(t){var e=void 0,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}function l(t,e){return this.lift(new Z(t,e))}function h(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new tt(t,e))}function f(t){return t&&"function"==typeof t.schedule}function p(t,e){fetch("https://demo7507750.mockable.io/books").then(function(t){return t.json()}).catch(function(t){e(t)}).then(function(r){return t?void e(null,r.filter(t)):e(null,r)})}function b(t,e){return e.filter(function(e){return e.id!==t&&Math.random()>.5})}function d(t,e){return Math.random()>.5?[{user:{name:"Shai Alon",avatar:"http://www.gravatar.com/avatar/4dadde84006bb046b49769eed66c7f44?s=200"},text:'Eric Arthur Blair was an important English writer that you probably already know by the pseudonym of George Orwell. He wrote quite a few books, but many believe that his more influential ones were "Animal farm" (1944) and "1984" (1948).In those two books he conveyed, metaphorically and not always obviously, what Soviet Russia meant to him.\n                I would like to make some comments about the second book, "1984". That book was written near his death, when he was suffering from tuberculosis, what might have had a lot to do with the gloominess that is one of the essential characteristics of "1984". The story is set in London, in a nightmarish 1984 that for Orwell might well have been a possibility, writting as he was many years before that date. Or maybe, he was just trying to warn his contemporaries of the dangers of not opposing the Soviet threat, a threat that involved a new way of life that was in conflict with all that the English held dear.\n                Orwell tried to depict a totalitarian state, where the truth didn\'t exist as such, but was merely what the "Big Brother" said it was. Freedom was only total obedience to the Party, and love an alien concept, unless it was love for the Party. The story is told from the point of view of Winston Smith, a functionary of the Ministry of Truth whose work involved the "correction" of all records each time the "Big Brother" decided that the truth had changed. The Party slogan said that "Who controls the past controls the future: who controls the present controls the past", and they applied it constantly by "bringing up to date" the past so as to make it coincide with whatever the Party wanted.'},{user:{name:"Ilya",avatar:"http://www.gravatar.com/avatar/b8e2ef5495f109ad48c74f5e732f558c?s=200"},text:"I think its bad.."}]:[]}function v(t){return ct}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("Drawer"===t){var r=R.ui.drawer;return r.enabled=!0,r}return new R[t](e)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=y(t,e);return r.forEach(function(t){"function"==typeof t?t().appendTo(o):"undefined"==typeof t||t.appendTo(o)}),n.forEach(function(t){return"function"==typeof t?t(o):null}),o}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dt({layoutData:{height:t.height||1,right:0,left:0,top:"prev()"},background:t.color||"rgba(0, 0, 0, 0.1)"})}function w(t,e,r){return t&&t.length>0?t.map(e):r?[r]:[]}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Et({duration:t,delay:e})}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return Et({duration:t,delay:e,translationX:r})}function x(){yt({id:"appDrawer"},[mt,wt({image:"https://antonioleiva.com/wp-content/uploads/2014/10/WallpaperAndroid50.jpg",scaleMode:"fit"})]),p(null,function(t,e){t||St.stack.push(E("Book Store","resources/images/page_all_books.png",e))}),p(function(t){return t.popular},function(t,e){t||St.stack.push(E("Popular","resources/images/page_popular_books.png",e))}),p(function(t){return t.favorite},function(t,e){t||St.stack.push(E("Favorite","resources/images/page_favorite_books.png",e))})}function E(t,e,r){return ht({title:t,topLevel:!0,image:{src:e,scale:3}},[S(r)])}function T(t,e){return St.stack.push(ht(t.title,[P(t),g(),j(t,e)]))}function O(t){return St.stack.push(ht(t.title,[ft({layoutData:Pt.full,direction:"vertical"},[gt(t.title,jt.bookTitle,_(1e3)),gt(v(t.id),jt.bookChapter,_(3e3,500))])]).apply(jt))}function S(t){return vt({layoutData:Pt.full,itemHeight:72,items:t,initializeCell:function(t){[wt({class:"bookImage",layoutData:{left:Ot,centerY:0,width:32,height:48},scaleMode:"fit"}),gt({class:"bookTitle",layoutData:{left:64,right:Ot,top:Ot},textColor:"#4a4a4a"}),gt({class:"bookAuthor",layoutData:{left:64,right:Ot,top:["prev()",4]},textColor:"#7b7b7b"})].forEach(function(e){return e.appendTo(t)}),t.on("change:item",function(e,r){t.children(".bookImage").set("image",r.image),t.children(".bookTitle").set("text",r.title),t.children(".bookAuthor").set("text",r.author)})}}).on("select",function(e,r){T(r,t)})}function P(t){return dt(At.container,[wt(t.image,At.image,_(800)),dt(At.textContainer,[gt(t.title,At.title,k(500,100)),gt(t.author,At.author,k(500,300)),gt(t.price,At.price,k(500,500))])]).on("tap",function(){O(t)})}function j(t,e){return pt({tabBarLocation:"top",paging:!0,layoutData:{top:"prev()",left:0,right:0,bottom:0}},[bt("Related",[S(b(t.id,e))]),bt("Comments",[A(d(t.id,e))])])}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ft(Pt.full,w(t,C,D))}function C(t){return dt(Ct.commentContainer,[wt(t.user.avatar,Ct.commenterAvatar),gt(t.user.name,Ct.commentAuthor),gt(t.text,Ct.commentText)]).apply(Ct)}function D(){return dt(Ct.commentContainer,[gt("No comments yet for this item :(",Ct.noComments)])}var V=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},I=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R="default"in t?t.default:t,q={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Y=q["undefined"==typeof self?"undefined":M(self)]&&self||q["undefined"==typeof window?"undefined":M(window)]&&window,B=q["undefined"==typeof global?"undefined":M(global)]&&global;!B||B.global!==B&&B.window!==B||(Y=B);var F=Array.isArray||function(t){return t&&"number"==typeof t.length},U={e:{}},X=void 0,L=function(t){function o(t){e(this,o);var n=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));n.errors=t;var i=Error.call(n,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");return n.name=i.name="UnsubscriptionError",n.stack=i.stack,n.message=i.message,n}return n(o,t),o}(Error),W=function(){function t(r){e(this,t),this.closed=!1,r&&(this._unsubscribe=r)}return I(t,[{key:"unsubscribe",value:function(){var t=!1,e=void 0;if(!this.closed){this.closed=!0;var r=this._unsubscribe,n=this._subscriptions;if(this._subscriptions=null,i(r)){var a=s(r).call(this);a===U&&(t=!0,(e=e||[]).push(U.e))}if(F(n))for(var u=-1,c=n.length;++u<c;){var l=n[u];if(o(l)){var h=s(l.unsubscribe).call(l);if(h===U){t=!0,e=e||[];var f=U.e;f instanceof L?e=e.concat(f.errors):e.push(f)}}}if(t)throw new L(e)}}},{key:"add",value:function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch("undefined"==typeof e?"undefined":M(e)){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)break;this.closed?r.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(r);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return r}},{key:"remove",value:function(e){if(null!=e&&e!==this&&e!==t.EMPTY){var r=this._subscriptions;if(r){var n=r.indexOf(e);n!==-1&&r.splice(n,1)}}}}]),t}();W.EMPTY=function(t){return t.closed=!0,t}(new W);var z={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}},H=Y.Symbol,N="function"==typeof H&&"function"==typeof H.for?H.for("rxSubscriber"):"@@rxSubscriber",G=function(t){function o(t,n,i){e(this,o);var a=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=z;break;case 1:if(!t){a.destination=z;break}if("object"===("undefined"==typeof t?"undefined":M(t))){t instanceof o?(a.destination=t,a.destination.add(a)):(a.syncErrorThrowable=!0,a.destination=new J(a,t));break}default:a.syncErrorThrowable=!0,a.destination=new J(a,t,n,i)}return a}return n(o,t),I(o,[{key:N,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,V(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}}],[{key:"create",value:function(t,e,r){var n=new o(t,e,r);return n.syncErrorThrowable=!1,n}}]),o}(W),J=function(t){function o(t,n,a,s){e(this,o);var u=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));u._parent=t;var c=void 0,l=u;return i(n)?c=n:n&&(l=n,c=n.next,a=n.error,s=n.complete,i(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u)),u._context=l,u._next=c,u._error=a,u._complete=s,u}return n(o,t),I(o,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parent;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parent;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}}},{key:"complete",value:function(){if(!this.isStopped){var t=this._parent;this._complete?t.syncErrorThrowable?(this.__tryOrSetError(t,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}}},{key:"__tryOrSetError",value:function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1}},{key:"_unsubscribe",value:function(){var t=this._parent;this._context=null,this._parent=null,t.unsubscribe()}}]),o}(G),K=c(Y),Q=function(){function t(r){e(this,t),this._isScalar=!1,r&&(this._subscribe=r)}return I(t,[{key:"lift",value:function(e){var r=new t;return r.source=this,r.operator=e,r}},{key:"subscribe",value:function(t,e,r){var n=this.operator,o=u(t,e,r);if(n?n.call(o,this):o.add(this._subscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}},{key:"forEach",value:function(t,e){var r=this;if(e||(Y.Rx&&Y.Rx.config&&Y.Rx.config.Promise?e=Y.Rx.config.Promise:Y.Promise&&(e=Y.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})}},{key:"_subscribe",value:function(t){return this.source.subscribe(t)}},{key:K,value:function(){return this}}]),t}();Q.create=function(t){return new Q(t)};var Z=function(){function t(r,n){e(this,t),this.predicate=r,this.thisArg=n}return I(t,[{key:"call",value:function(t,e){return e._subscribe(new $(t,this.predicate,this.thisArg))}}]),t}(),$=function(t){function o(t,n,i){e(this,o);var a=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));return a.predicate=n,a.thisArg=i,a.count=0,a.predicate=n,a}return n(o,t),I(o,[{key:"_next",value:function(t){var e=void 0;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)}}]),o}(G),tt=function(){function t(r,n){e(this,t),this.project=r,this.thisArg=n}return I(t,[{key:"call",value:function(t,e){return e._subscribe(new et(t,this.project,this.thisArg))}}]),t}(),et=function(t){function o(t,n,i){e(this,o);var a=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));return a.project=n,a.count=0,a.thisArg=i||a,a}return n(o,t),I(o,[{key:"_next",value:function(t){var e=void 0;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)}}]),o}(G),rt=function(){function t(r){e(this,t),this._isScalar=!1,r&&(this._subscribe=r)}return I(t,[{key:"lift",value:function(e){var r=new t;return r.source=this,r.operator=e,r}},{key:"subscribe",value:function(t,e,r){var n=this.operator,o=u(t,e,r);if(n?n.call(o,this):o.add(this._subscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}},{key:"forEach",value:function(t,e){var r=this;if(e||(Y.Rx&&Y.Rx.config&&Y.Rx.config.Promise?e=Y.Rx.config.Promise:Y.Promise&&(e=Y.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})}},{key:"_subscribe",value:function(t){return this.source.subscribe(t)}},{key:K,value:function(){return this}}]),t}();rt.create=function(t){return new rt(t)};var nt,ot=function(t){function o(t,n){e(this,o);var i=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.value=t,i.scheduler=n,i._isScalar=!0,n&&(i._isScalar=!1),i}return n(o,t),I(o,[{key:"_subscribe",value:function(t){var e=this.value,r=this.scheduler;return r?r.schedule(o.dispatch,0,{done:!1,value:e,subscriber:t}):(t.next(e),void(t.closed||t.complete()))}}],[{key:"create",value:function(t,e){return new o(t,e)}},{key:"dispatch",value:function(t){var e=t.done,r=t.value,n=t.subscriber;return e?void n.complete():(n.next(r),void(n.closed||(t.done=!0,this.schedule(t))))}}]),o}(rt),it=function(t){function o(t){e(this,o);var n=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return n.scheduler=t,n}return n(o,t),I(o,[{key:"_subscribe",value:function(t){var e=this.scheduler;return e?e.schedule(o.dispatch,0,{subscriber:t}):void t.complete()}}],[{key:"create",value:function(t){return new o(t)}},{key:"dispatch",value:function(t){var e=t.subscriber;e.complete()}}]),o}(rt),at=function(t){function o(t,n){e(this,o);var i=r(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return i.array=t,i.scheduler=n,n||1!==t.length||(i._isScalar=!0,i.value=t[0]),i}return n(o,t),I(o,[{key:"_subscribe",value:function(t){var e=0,r=this.array,n=r.length,i=this.scheduler;if(i)return i.schedule(o.dispatch,0,{array:r,index:e,count:n,subscriber:t});for(var a=0;a<n&&!t.closed;a++)t.next(r[a]);t.complete()}}],[{key:"create",value:function(t,e){return new o(t,e)}},{key:"of",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[e.length-1];f(n)?e.pop():n=null;var i=e.length;return i>1?new o(e,n):1===i?new ot(e[0],n):new it(n)}},{key:"dispatch",value:function(t){var e=t.array,r=t.index,n=t.count,o=t.subscriber;return r>=n?void o.complete():(o.next(e[r]),void(o.closed||(t.index=r+1,this.schedule(t))))}}]),o}(rt),st=at.of,ut="Etiam nisl nisi, egestas quis lacus ut, tristique suscipit metus. In\nvehicula lectus metus, at accumsan elit fringilla blandit. Integer et quam\nsed dolor pharetra molestie id eget dui. Donec ac libero eu lectus dapibus\nplacerat eu a tellus. Fusce vulputate ac sem sit amet bibendum. Pellentesque\neuismod varius purus nec pharetra. Sed vitae ipsum sit amet risus vehicula\neuismod in at nunc. Sed in viverra arcu, id blandit risus. Praesent sagittis\nquis nisl  id molestie. Donec dignissim, nisl id volutpat consectetur, massa\ndiam aliquam lectus, sed euismod leo elit eu justo. Integer vel ante\nsapien.",ct=[ut,ut,ut].join("\n\n"),lt=function(t){return function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=[],i={},a=[],s=[];return r.forEach(function(t){var e=kt(t);"array"===e?o=t:"object"===e?i=t:"function"===e?a.push(t):xt(t)?s.push(t):"number"===e&&a.push(t.toString())}),s.forEach(function(e){_t[t]&&_t[t](i,e)}),m(t,i,o,a)}},ht=lt("Page"),ft=lt("ScrollView"),pt=lt("TabFolder"),bt=lt("Tab"),dt=lt("Composite"),vt=lt("CollectionView"),yt=lt("Drawer"),mt=lt("PageSelector"),gt=lt("TextView"),wt=lt("ImageView"),_t={Text:function(t,e){return t.text=e},TextView:function(t,e){return t.text=e},Image:function(t,e){return t.image=e},ImageView:function(t,e){return t.image=e},Tab:function(t,e){return t.title=e},Page:function(t,e){return t.title=e}},kt=function(t){return Array.isArray(t)?"array":"undefined"==typeof t?"undefined":M(t)},xt=function(t){return"string"==typeof t&&t.length>0},Et=function(t){return function(e){e.set({opacity:0,transform:{translationX:t.translationX||0,translationY:t.translationY||0}}),e.animate({opacity:1,transform:{translationX:0,translationY:0}},{duration:t.duration,delay:t.delay,easing:"ease-out"})}},Tt=Q.create(function(t){t.next(1),setTimeout(function(){t.complete()},1e3)});Tt.subscribe(function(t){return console.log("got value "+t)}),(nt=(nt=st.call(Q,1,2,3,4,5,6),h).call(nt,function(t){return t}),l).call(nt,function(t){return t%2}).subscribe(function(t){return console.log("Value "+t)});var Ot=16,St=new tabris.NavigationView({left:0,top:0,right:0,bottom:0,drawerActionVisible:!0}).appendTo(tabris.ui.contentView),Pt={stackMargin:{left:Ot,top:"prev()",right:Ot},stack:{top:"prev()",left:0,right:0},full:{left:0,top:0,right:0,bottom:0}},jt={bookTitle:{layoutData:{left:Ot,top:2*Ot,right:Ot},textColor:"rgba(0, 0, 0, 0.5)",font:"bold 20px"},bookChapter:{layoutData:{left:Ot,right:Ot,top:["prev()",Ot],bottom:Ot}}},At={container:{background:"white",highlightOnTouch:!0,top:0,height:192,left:0,right:0},image:{height:160,width:106,left:Ot,top:Ot},textContainer:{left:["prev()",Ot],top:Ot,right:Ot},title:{font:"bold 20px",left:0,top:"prev()",right:0},author:{left:0,top:"prev()",right:0},price:{left:0,top:["prev()",Ot],textColor:"rgb(102, 153, 0)"}},Ct={commentContainer:Pt.stackMargin,commenterAvatar:{left:Ot,top:10,width:32,height:48,scaleMode:"fit"},commentText:{left:64,right:Ot,top:"prev()",textColor:"#7b7b7b"},commentAuthor:{left:64,right:Ot,top:15,textColor:"#000000"},noComments:{left:64,right:Ot,top:15,textColor:"#000000",font:"bold 16px"}};x()});